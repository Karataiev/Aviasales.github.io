{"ast":null,"code":"import actionNames from\"./actionNames\";import ticketList from'../Components/ticketList.json';const getDefaultTickets=()=>{let{tickets}=ticketList;return tickets.sort((a,b)=>a.price>b.price?1:-1);};const defaultState={currency:\"RUB\",tickets:[...getDefaultTickets()],filters:[{id:0,label:'Без пересадок',checked:true},{id:1,label:'1 пересадка',checked:true},{id:2,label:'2 пересадки',checked:true},{id:3,label:'3 пересадки',checked:true}],exchangeRates:{USD:0.013612,EUR:0.011612,RUB:1}};function currencyReducer(){let state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:defaultState;let action=arguments.length>1?arguments[1]:undefined;switch(action.type){case actionNames.CURRENCY_CHANGE:const{currencyName}=action;let tickets=[...getDefaultTickets()];tickets=tickets.map(ticket=>({...ticket,price:~~(ticket.price*state.exchangeRates[currencyName])}));return{...state,currency:currencyName,tickets};case actionNames.EXCHANGE_RATES:const{exchangeRates}=action;return{...state,exchangeRates};case actionNames.FILTERS:const{filterName}=action;const newFilters=state.filters.map(filter=>{if(filter.id===filterName)return{...filter,checked:!filter.checked};return{...filter};});const newTickets=[...getDefaultTickets()].filter(ticket=>newFilters.find(filter=>filter.id===ticket.stops).checked);return{...state,filters:newFilters,tickets:newTickets};case actionNames.ONLY_FILTER:const{onlyFilter}=action;let onlyChecked=state.filters;onlyChecked=onlyChecked.map(filter=>({...filter,checked:onlyFilter===filter.id}));const newTickets_2=[...getDefaultTickets()].filter(ticket=>onlyChecked.find(filter=>filter.id===ticket.stops).checked);return{...state,filters:onlyChecked,tickets:newTickets_2};case actionNames.CHECK_ALL:const{toggleCheckAllName}=action;let allChecked=state.filters;if(toggleCheckAllName==='All'){allChecked=allChecked.map(filter=>({...filter,checked:!allChecked.checked}));}return{...state,filters:allChecked,tickets:[...defaultState.tickets]};default:return{...state};}}export default currencyReducer;","map":{"version":3,"names":["actionNames","ticketList","getDefaultTickets","tickets","sort","a","b","price","defaultState","currency","filters","id","label","checked","exchangeRates","USD","EUR","RUB","currencyReducer","state","arguments","length","undefined","action","type","CURRENCY_CHANGE","currencyName","map","ticket","EXCHANGE_RATES","FILTERS","filterName","newFilters","filter","newTickets","find","stops","ONLY_FILTER","onlyFilter","onlyChecked","newTickets_2","CHECK_ALL","toggleCheckAllName","allChecked"],"sources":["D:/Programing/Aviasales.github.io/src/Redux/currencyReducer.js"],"sourcesContent":["import actionNames from \"./actionNames\";\r\nimport ticketList from '../Components/ticketList.json';\r\n\r\nconst getDefaultTickets = () => {\r\n    let { tickets } = ticketList;\r\n    return tickets.sort((a, b) => a.price > b.price ? 1 : -1);\r\n}\r\n\r\nconst defaultState = {\r\n    currency: \"RUB\",\r\n    tickets: [...getDefaultTickets()],\r\n    filters: [\r\n        { id: 0, label: 'Без пересадок', checked: true },\r\n        { id: 1, label: '1 пересадка',  checked: true },\r\n        { id: 2, label: '2 пересадки',  checked: true },\r\n        { id: 3, label: '3 пересадки',  checked: true }\r\n    ],\r\n    exchangeRates: {\r\n        USD: 0.013612,\r\n        EUR: 0.011612,\r\n        RUB: 1\r\n    },\r\n}\r\n\r\nfunction currencyReducer (state = defaultState, action) {\r\n    switch(action.type) {\r\n        case actionNames.CURRENCY_CHANGE:\r\n            const { currencyName } = action;\r\n            let tickets = [...getDefaultTickets()];\r\n            tickets = tickets.map((ticket) => ({...ticket, price: ~~(ticket.price * state.exchangeRates[currencyName])}))\r\n            return {...state, currency: currencyName, tickets}\r\n\r\n        case actionNames.EXCHANGE_RATES: \r\n            const { exchangeRates } = action;\r\n            return {...state, exchangeRates}\r\n\r\n        case actionNames.FILTERS: \r\n            const { filterName } = action;\r\n            const newFilters = state.filters.map((filter) => {\r\n                if (filter.id === filterName) return {...filter, checked: !filter.checked};\r\n                return {...filter}\r\n            })\r\n            const newTickets = [...getDefaultTickets()].filter((ticket) => newFilters.find(filter => filter.id === ticket.stops).checked)\r\n                return {...state, filters: newFilters, tickets: newTickets }\r\n       \r\n        case actionNames.ONLY_FILTER:\r\n            const { onlyFilter } = action;\r\n            let onlyChecked = state.filters;\r\n            onlyChecked = onlyChecked.map((filter) => ({...filter, checked: onlyFilter === filter.id}))\r\n            \r\n            const newTickets_2 = [...getDefaultTickets()].filter((ticket) => onlyChecked.find(filter => filter.id === ticket.stops).checked)\r\n                return {...state, filters: onlyChecked, tickets: newTickets_2 }\r\n        \r\n        case actionNames.CHECK_ALL:\r\n            const { toggleCheckAllName } = action;\r\n            let allChecked = state.filters;\r\n            if (toggleCheckAllName === 'All') {\r\n               allChecked = allChecked.map((filter) => ({...filter, checked: !allChecked.checked}))\r\n            }\r\n            return {...state, filters: allChecked, tickets: [...defaultState.tickets]}\r\n\r\n        default:\r\n            return {...state};  \r\n    }\r\n}\r\n\r\nexport default currencyReducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}